<div class="min-h-screen w-full pt-24 pb-10 px-4 md:px-10 relative z-10">
  <!-- Header -->
  <header
    class="flex flex-col md:flex-row justify-between items-end mb-12 border-b border-white/10 pb-6"
  >
    <div>
      <h1
        class="text-5xl md:text-7xl font-bold text-white tracking-tighter mb-2"
      >
        STOCK FLOW<span class="text-[#d1f83b]">.</span>
      </h1>
      <p class="text-gray-400 max-w-md">
        Track every movement in your inventory timeline.
      </p>
    </div>
    <button (click)="showForm = !showForm" class="btn-primary mt-6 md:mt-0">
      {{ showForm ? "Close Form" : "+ New Order" }}
    </button>
  </header>

  <!-- Order Form Container -->
  <div *ngIf="showForm" class="mb-12">
    <app-order-form (orderCreated)="onOrderCreated()"></app-order-form>
  </div>

  <!-- Timeline Container -->
  <div *ngIf="!showForm" class="w-full max-w-5xl mx-auto relative">
    <!-- Vertical Line -->
    <div
      class="absolute left-8 md:left-1/2 top-0 bottom-0 w-px bg-white/10 transform -translate-x-1/2"
    ></div>

    <!-- Loading State -->
    <app-loading-spinner *ngIf="isLoading"></app-loading-spinner>

    <!-- Timeline Items -->
    <ng-container *ngIf="!isLoading">
      <div
        *ngFor="let m of movements; let i = index"
        #movementRow
        class="relative flex flex-col md:flex-row items-center mb-12 group"
      >
        <!-- Date (Left on Desktop) -->
        <div
          class="w-full md:w-1/2 flex justify-start md:justify-end px-8 md:px-12 mb-2 md:mb-0"
        >
          <div class="text-left md:text-right">
            <div class="text-[#d1f83b] font-mono text-sm font-bold">
              {{ m.date | date : "shortDate" }}
            </div>
            <div class="text-gray-500 text-xs">
              {{ m.date | date : "shortTime" }}
            </div>
          </div>
        </div>

        <!-- Center Dot -->
        <div
          class="absolute left-8 md:left-1/2 w-4 h-4 bg-[#1a1a1a] border-2 border-[#d1f83b] rounded-full transform -translate-x-1/2 z-10 group-hover:scale-150 transition-transform duration-300"
        ></div>

        <!-- Content (Right on Desktop) -->
        <div class="w-full md:w-1/2 pl-16 md:pl-12 pr-4">
          <div
            class="glass-panel p-6 rounded-xl hover:bg-white/5 transition-colors relative"
          >
            <!-- Type Badge -->
            <span
              class="absolute top-4 right-4 text-[10px] font-bold px-2 py-1 rounded uppercase tracking-wider"
              [ngClass]="{
                'bg-green-500/20 text-green-400': m.type === 'ENTREE',
                'bg-red-500/20 text-red-400': m.type === 'SORTIE',
                'bg-blue-500/20 text-blue-400': m.type === 'AJUSTEMENT'
              }"
            >
              {{ m.type }}
            </span>

            <h3 class="text-white font-bold mb-1">
              Order #{{ m.supplierOrderId?.substring(0, 8) }}
            </h3>
            <div class="text-gray-400 text-sm mb-2">
              Quantity:
              <span class="text-white font-mono">{{ m.quantity }}</span>
            </div>
            <div class="text-xs text-gray-600 font-mono truncate">
              {{ m.id }}
            </div>
          </div>
        </div>
      </div>

      <!-- Empty State -->
      <div
        *ngIf="movements.length === 0"
        class="py-20 text-center text-gray-500 relative z-10 bg-[#0a0a0a]"
      >
        <p>No stock movements recorded yet.</p>
      </div>
    </ng-container>
  </div>
</div>
